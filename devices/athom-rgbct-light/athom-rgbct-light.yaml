# Based on https://github.com/athom-tech/athom-configs/blob/main/athom-rgbct-light.yaml

substitutions:
  # default name is used as base for MAC suffix unique name generated by ESPHome
  name: "athom-rgbct-light"
  friendly_name: "Athom RGBCT Light"
  comment: "15W Color Bulb LB01-15W-ESP-1"

esphome:
  project:
    name: broccoliboy.athom-rgbct-light
    version: "1.0"

packages:
  hardware: !include ../../hardware/boards/esp8285.yaml
  base: !include ../../common/base.yaml

output:
  - platform: esp8266_pwm
    id: red_output
    pin: GPIO4
    min_power: 0.000499
    max_power: 1
    zero_means_zero: true
  - platform: esp8266_pwm
    id: green_output
    pin: GPIO12
    min_power: 0.000499
    max_power: 1
    zero_means_zero: true
  - platform: esp8266_pwm
    id: blue_output
    pin: GPIO14
    min_power: 0.000499
    max_power: 1
    zero_means_zero: true
  - platform: esp8266_pwm
    id: white_output
    pin: GPIO5
    min_power: 0.01
    max_power: 1
    zero_means_zero: true
  - platform: esp8266_pwm
    id: ct_output
    inverted: true
    pin: GPIO13

light:
  - platform: rgbct
    id: rgbct_light
    name: "Light"
    red: red_output
    green: green_output
    blue: blue_output
    white_brightness: white_output
    color_temperature: ct_output
    cold_white_color_temperature: 6000 K
    warm_white_color_temperature: 3000 K
    color_interlock: true
